
# Values in this file override the default values of our helm chart.
#
# See https://github.com/wunderio/charts/blob/master/drupal/values.yaml
# for all possible options.

varnish:
  enabled: true
  resources:
    requests:
      cpu: 1000m
      memory: 2048Mi
    limits:
      cpu: 2000m
      memory: 2560Mi
  image: eu.gcr.io/silta-images/varnish
  imageTag: 6-v0.1
  # https://varnish-cache.org/docs/trunk/users-guide/storage-backends.html
  #we default to memory
  storageBackend: 'malloc,2048M'


elasticsearch:
  enabled: true

mailhog:
  enabled: true

memcached:
  enabled: true

mounts:
  private-files:
    enabled: true


mariadb:
  enabled: true
  replication:
    enabled: false
  db:
    name: drupal
    user: drupal

  master:
    persistence:
      # Database storage disk space allocation
      # Request assistance from ops team after changing this on existing deployment.
      size: 1G
    nodeSelector:
      cloud.google.com/gke-nodepool: persistent
    tolerations:
      - key: cloud.google.com/gke-nodepool
        operator: Equal
        value: persistent


# Allow access from another namespace for testing purposes.
silta-release:
  proxy:
    enabled: true
    no_proxy: ".example.com"
  ingressAccess:
    test:
      additionalPodSelector:
        app: drupal
      from:
        - namespaceSelector:
            matchLabels:
              name: drupal-project
    allowESaccess:
      additionalPodSelector:
        chart: elasticsearch
      from:
        - namespaceSelector:
            matchLabels:
              name: drupal-project
